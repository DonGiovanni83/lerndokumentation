<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Ubuntu-20.04 - User-Setup mit Ansible | Way-Up 2020-2022</title><meta name="description" content="Dokunentation meiner Ausbildung bei Puzzle ITC zum Systemtechniker EFZ."><meta itemprop="name" content="Fabio Bertagna"><meta itemprop="description" content="Dokunentation meiner Ausbildung bei Puzzle ITC zum Systemtechniker EFZ."><meta itemprop="image" content="/lerndokumentation/assets/images/pubuntu.png"><meta property="og:url" content="/lerndokumentation/2020/08/21/ubuntu-20.04-user-setup-mit-ansible/"><meta property="og:type" content="website"><meta property="og:title" content="Ubuntu-20.04 - User-Setup mit Ansible | Way-Up 2020-2022"><meta property="og:site_name" content="Way-Up 2020-2022"><meta property="og:description" content="Dokunentation meiner Ausbildung bei Puzzle ITC zum Systemtechniker EFZ."><meta property="og:image" content="/lerndokumentation/assets/images/pubuntu.png"><link rel="icon" type="image/x-icon" href="/lerndokumentation/assets/images/favicon.ico"><link rel="stylesheet" href="/lerndokumentation/assets/css/app.css"><link rel="alternate" type="application/rss+xml" title="Way-Up 2020-2022" href="/lerndokumentation/feed.xml"><link rel="canonical" href="/lerndokumentation/2020/08/21/ubuntu-20.04-user-setup-mit-ansible/"><base href="/lerndokumentation/" /></head><body id="ubuntu-20-04-user-setup-mit-ansible" class="post-layout"><header class="header"> <a class="header__title" href="/lerndokumentation/">Way-Up 2020-2022</a><nav><ul class="header__list"><li><a href="/lerndokumentation/">Home</a></li><li><a href="https://www.puzzle.ch/de/blog/articles/author/fbertagna">√úber mich</a></li></ul></nav></header><main class="üíà"><div class="post"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding--double"><div class="grid-small"><h2 itemprop="name headline">Ubuntu-20.04 - User-Setup mit Ansible</h2><time class="post__date" datetime="2020-08-21T00:00:00+00:00" itemprop="datePublished">21 Aug 2020</time></div></div><div class="post__img"><div><figure class="absolute-bg" style="background-image: url('/lerndokumentation/assets/images/pubuntu.png');"></figure></div></div><div class="post__content section-padding"><div class="grid"><div id="markdown" itemprop="articleBody"><p>Bei Puzzle ITC wird standardm√§ssig Ubuntu als Betriebssystem eingesetzt. Bezieht ein Member ein neues Notebook, erh√§lt sie oder er ein Notebook mit einem Ubuntu welches den Puzzle-Bed√ºrfnissen entsprechend vorkonfiguriert ist. Dazu geh√∂ren zum Beispiel ein vorkonfiguriertes VPN, bereits installierte Druckertreiber und Drucker, internes Wifi schon eingerichtet, Adminzugriff f√ºr den Support, Netzwerk shares eingerichtet sowie auch einen Puzzle-Brand-Touch am Gnome.</p><p>Bestehend war das Staging-Setup f√ºr Ubuntu 18.04 LTS. √úber den internen PXE Server konnte man das Ubuntu 18.04 LTS Image und einige preseed-Files beziehen, welche den Installationsvorgang automatisieren sollten, sowie auch nach dem ersten Einloggen des neuen Users weitere Puzzle-Konfigurations-Prozesse mit Ansible-Pull triggerten. Nun war mein Auftrag, infolge des Ubuntu LTS-Update auf 20.04. das Setup der neuen Betriebssystem-Version anzupassen und, so weit m√∂glich, zu vereinfachen.</p><p>Dazu habe ich mich erstmals mit dem bestehenden Setup auseinandersetzen m√ºssen, um zu sehen wie das Ganze zurzeit funktionierte und anschliessend alle Schritte vom PXE-Boot bis zum Ansible-Setup dem neuen Betriebssystem anpassen.</p><p>Mit allen Neuerungen und Anpassungen kann das bestehende Setup in folgenden Schritten abgebildet werden, welche ich anschliessend noch etwas genauer beschreiben werde, zusammenfasst werden:</p><p><img src="/assets/images/pubuntu-setup-diagram.png" alt="Pubuntu Setup Diagramm" /></p><h2 id="1-pxe-boot--install-mit-preseed">1. PXE Boot &amp; Install mit preseed</h2><p>Ist ein Notebook am internen Netz angeschlossen, kann vom internen Puzzle-PXE-Server die Ganze OS-‚ÄòMenukarte‚Äô vom aus Notebook abgiefragt werden. In diesem Menu existiert f√ºr das Ubuntu-20.04-Setup folgende Auswahl:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
menu PXE Boot Options
...
item pubuntu-net-20.04 Puzzle Ubuntu 20.04 installation
...

:pubuntu-net-20.04
set base-url http://archive.ubuntu.com/ubuntu/dists/focal-updates/main/installer-amd64/current/legacy-images/netboot/ubuntu-installer/amd64
kernel ${base-url}/linux
initrd ${base-url}/initrd.gz
imgargs linux initrd=initrd.gz auto=true fb=false priority=critical preseed/locale=en_US kbd-chooser/method=ch keymap=ch debian-installer/keymap=ch preseed/url=http:///pubuntu.seed
boot ||  
</code></pre></div></div><h2 id="2">2.</h2></div></div></div><div class="section-padding--none"><div class="grid"><hr class="sep"/></div></div><div class="section-padding"><div class="grid-small"> <span class="post__author">Posted by <a href="https://www.puzzle.ch/de/blog/articles/author/fbertagna" title="More By Fabio Bertagna">Fabio Bertagna</a></span><p class="post__bio"></p></div></div></article></div><section class="related section-padding"><div class="grid-xlarge"><h2 class="related__title">Related</h2><div class="related__container"><article class="related__post"> <a class="related__link" href="/lerndokumentation/2020/08/21/ubuntu-20.04-user-setup-mit-ansible/"><figure class="related__img"> <img src="/lerndokumentation/assets/images/pubuntu.png" alt="Ubuntu-20.04 - User-Setup mit Ansible"/></figure><div><h2 class="related__text">Ubuntu-20.04 - User-Setup mit Ansible</h2></div></a></article><article class="related__post"> <a class="related__link" href="/lerndokumentation/2020/02/08/ansible-labs/"><figure class="related__img"> <img src="/lerndokumentation/assets/images/ansible-logo.png" alt="ansible-labs"/></figure><div><h2 class="related__text">ansible-labs</h2></div></a></article></div></div></section></main><footer class="footer section-padding"><div class="grid"><hr class="sep--white"/><div class="footer__container"><ul class="footer__tags"><li><a class="footer__link" href="/tag/linux">Linux</a></li><li><a class="footer__link" href="/tag/ansible">Ansible</a></li><li><a class="footer__link" href="/tag/ubuntu">Ubuntu</a></li><li><a class="footer__link" href="/tag/prometheus">Prometheus</a></li></ul></div></div></footer><script src="/lerndokumentation/assets/js/app.min.js"></script></body></html>
  